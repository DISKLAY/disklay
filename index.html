<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лист Персонажа D&D</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>

    <div class="container">
        <header class="character-header">
            <div class="char-name-container">
                <input type="text" id="charName" placeholder="Имя Персонажа">
            </div>
            <div class="char-details-grid">
                <div><label>Класс</label><select id="charClass"></select></div>
                <div><label>Уровень</label><input type="number" id="charLevel" value="1" min="1" max="20"></div>
                <div><label>Раса</label><input type="text" id="charRace" placeholder="Раса"></div>
                <div><label>Предыстория</label><input type="text" id="charBackground" placeholder="Предыстория"></div>
                <div><label>Мировоззрение</label><input type="text" id="charAlignment" placeholder="Мировоззрение"></div>
            </div>
        </header>

        <main class="main-content">
            <div class="left-column">
                <!-- АТРИБУТЫ -->
                <section class="stats-section">
                    <div class="stat-box">
                        <label>Сила</label>
                        <div class="mod" id="strMod">0</div>
                        <input type="number" class="score" id="strScore" value="10">
                    </div>
                    <div class="stat-box">
                        <label>Ловкость</label>
                        <div class="mod" id="dexMod">0</div>
                        <input type="number" class="score" id="dexScore" value="10">
                    </div>
                    <div class="stat-box">
                        <label>Телосложение</label>
                        <div class="mod" id="conMod">0</div>
                        <input type="number" class="score" id="conScore" value="10">
                    </div>
                    <div class="stat-box">
                        <label>Интеллект</label>
                        <div class="mod" id="intMod">0</div>
                        <input type="number" class="score" id="intScore" value="10">
                    </div>
                    <div class="stat-box">
                        <label>Мудрость</label>
                        <div class="mod" id="wisMod">0</div>
                        <input type="number" class="score" id="wisScore" value="10">
                    </div>
                    <div class="stat-box">
                        <label>Харизма</label>
                        <div class="mod" id="chaMod">0</div>
                        <input type="number" class="score" id="chaScore" value="10">
                    </div>
                </section>

                <!-- СПАСБРОСКИ И НАВЫКИ -->
                <div class="skills-saves-container">
                    <div class="proficiency-bonus-box">
                        <div id="profBonus" class="prof-bonus-value">+2</div>
                        <div>Бонус Мастерства</div>
                    </div>
                    <section class="saving-throws">
                        <h3>Спасброски</h3>
                        <ul id="savingThrowsList"></ul>
                    </section>
                    <section class="skills">
                        <h3>Навыки</h3>
                        <ul id="skillsList"></ul>
                    </section>
                </div>
            </div>

            <div class="middle-column">
                <!-- БОЕВЫЕ ХАРАКТЕРИСТИКИ -->
                <section class="combat-stats">
                    <div class="combat-box">
                        <div class="combat-value" id="armorClass">10</div>
                        <label>Класс Доспеха</label>
                    </div>
                    <div class="combat-box">
                        <div class="combat-value" id="initiative">0</div>
                        <label>Инициатива</label>
                    </div>
                    <div class="combat-box">
                        <div class="combat-value"><input type="number" id="speed" value="30"></div>
                        <label>Скорость</label>
                    </div>
                </section>

                <!-- ЗДОРОВЬЕ -->
                <section class="hit-points">
                    <div class="hp-max">
                        <label>Максимум хитов</label>
                        <input type="number" id="maxHP" value="10">
                    </div>
                    <div class="hp-current-container">
                        <input type="number" id="currentHP" value="10">
                        <label>Текущие хиты</label>
                    </div>
                    <div class="hp-controls">
                        <input type="number" id="hpChange" placeholder="±">
                        <button id="healBtn">Лечить</button>
                        <button id="damageBtn">Урон</button>
                    </div>
                </section>
                
                <!-- КОСТИ ХИТОВ -->
                <section class="hit-dice">
                    <div>
                        <label>Всего костей</label>
                        <span id="totalHitDice">1d8</span>
                    </div>
                    <button id="rollHitDice">Бросить кость хитов</button>
                    <p id="hitDiceResult"></p>
                </section>

                <!-- ВКЛАДКИ -->
                <nav class="tabs">
                    <button class="tab-link active" data-tab="tab-inventory">Инвентарь</button>
                    <button class="tab-link" data-tab="tab-spells">Заклинания</button>
                    <button class="tab-link" data-tab="tab-features">Умения и черты</button>
                </nav>

                <!-- ================== ВКЛАДКА ИНВЕНТАРЯ (ИСПРАВЛЕНО) ================== -->
                <div id="tab-inventory" class="tab-content active">
                    <h4>Снаряжение</h4>
                    <div class="inventory-section">
                        <h5>Оружие</h5>
                        <table id="weaponsTable">
                            <thead><tr><th>Название</th><th>Бонус</th><th>Урон/Тип</th><th>Управление</th></tr></thead>
                            <tbody></tbody>
                        </table>
                        <form id="addWeaponForm" class="item-form">
                            <input type="text" id="weaponName" placeholder="Название" required>
                            <input type="text" id="weaponDamage" placeholder="1d8 рубящий" required>
                            <button type="submit">Добавить оружие</button>
                        </form>
                    </div>
                     <div class="inventory-section">
                        <h5>Броня и прочие предметы</h5>
                        <!-- ИСПРАВЛЕНО: Добавлена таблица для предметов -->
                        <table id="itemsTable">
                            <thead><tr><th>Название</th><th>Эффект</th><th>Характеристики</th><th>Управление</th></tr></thead>
                            <tbody></tbody>
                        </table>
                        <form id="addItemForm" class="item-form">
                            <input type="text" id="itemName" placeholder="Название" required>
                            <input type="text" id="itemEffect" placeholder="КД 16, макс. Ловк +2 / Бонус">
                            <input type="text" id="itemProps" placeholder="Скрытность (помеха)">
                            <label><input type="checkbox" id="itemIsArmor"> Броня</label>
                            <label><input type="checkbox" id="itemIsShield"> Щит</label>
                            <button type="submit">Добавить предмет</button>
                        </form>
                    </div>
                </div>

                <!-- ================== ВКЛАДКА ЗАКЛИНАНИЙ (ИСПРАВЛЕНО) ================== -->
                <div id="tab-spells" class="tab-content">
                    <h4>Книга заклинаний</h4>
                    <div id="spellSlotsContainer"></div>
                    <table id="spellsTable">
                        <thead><tr><th>Ур.</th><th>Название</th><th>Описание</th><th></th></tr></thead>
                        <tbody></tbody>
                    </table>
                    <form id="addSpellForm" class="item-form">
                        <input type="number" id="spellLevel" placeholder="Ур." min="0" max="9" required>
                        <input type="text" id="spellName" placeholder="Название заклинания" required>
                        <textarea id="spellDesc" placeholder="Краткое описание"></textarea>
                        <button type="submit">Добавить заклинание</button>
                    </form>
                </div>

                <!-- ================== ВКЛАДКА УМЕНИЙ (ИСПРАВЛЕНО) ================== -->
                <div id="tab-features" class="tab-content">
                     <h4>Умения класса, расы и черты</h4>
                     <textarea id="featuresAndTraits" placeholder="Запишите сюда ваши умения, черты и прочие особенности..."></textarea>
                </div>
            </div>
            
            <div class="right-column">
                <section class="export-import">
                    <h3>Управление</h3>
                    <button id="exportBtn">Экспорт персонажа</button>
                    <label for="importFile" class="import-label">Импорт персонажа</label>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                </section>
                <section class="notes">
                    <h3>Заметки</h3>
                    <textarea id="notes" placeholder="Союзники, организации, важные места и события..."></textarea>
                </section>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>